class Way extends Component {

    constructor(id) {
        super(id)
    }

    init() {
        this.step = 0
        _createPoints()
        $btnBig.addEventListener('click', _moving.bind(this))
        _drawWay()
    }

}

function _moving() {
    $btnBig.setAttribute('disabled', true)    
    let counter = 0
    const thisStep = points[this.step]
    const isCoords = points[this.step].coords
    if(!isCoords) {
        return ''
    }
    const arXY = thisStep.coords.split(';')
    const personWidth = Math.floor($person.offsetWidth/2)
    const personHeight = $person.offsetHeight
    const mySetInterval = setInterval(() => {
            const stepCoords = arXY[counter];
            if(stepCoords) {
                const myXY = stepCoords.split(':')
                $person.style.left = myXY[0] - personWidth + 'px'
                $person.style.top = myXY[1] - personHeight + 'px'
            } else {
                clearInterval(mySetInterval)
                this.step = this.step + 1
                counter = 0
                $btnBig.removeAttribute('disabled')
            } 
            counter++
    }, 10)
}


function _createPoints() {
    points.forEach(point => {
        const $point = document.createElement('div')
        switch(point.type) {
            case 'point':
                $point.style.width = '18px'
                $point.style.height = '12px'
                $point.style.zIndex = '100'
            break;
            case 'station':
                $point.style.width = '25px'
                $point.style.height = '17px'
                $point.style.zIndex = '100'
            break;
            case 'start':
                $point.style.width = '32px'
                $point.style.height = '22px'
                $point.style.zIndex = '100'
            break;
            case 'finish':
                $point.style.width = '29px'
                $point.style.height = '21px'
                $point.style.zIndex = '50'
            break;
        }
        $point.style.background = `url('img/way-${point.type}.png')`
        $point.classList.add(`way-${point.type}`)
        $point.style.position = 'absolute'
        $point.style.left = point.x - 2 + 'px'
        $point.style.top = point.y - 2 + 'px'
        $game.insertAdjacentElement('afterbegin', $point);
    })
}

function _drawWay() {
    let arWay = '';
    $game.onmousedown = function(event) {
        $game.onmousemove = function(event) {
            arWay += event.x + ':' + event.y + ';'
        }
        $game.onmouseup = function() {
            $game.onmousemove = null
            console.log(arWay)
            arWay = ''
        }
    }
}

const points = [
    {id: 0, type: 'start', x: 426, y: 493, coords: '443:502;441:502;440:502;439:502;437:502;437:501;436:501;435:501;434:501;432:501;432:499;431:499;431:498;430:498;430:497;428:497;427:497;427:496;427:495;426:495;425:495;425:494;424:494;423:494;423:493;422:493;422:492;422:490;421:490;419:490;418:490;418:489;417:489;416:489;415:489;414:489;413:489;413:488;413:486;413:485;412:485;412:484;412:483;412:481;410:481;410:480;409:479;409:477;408:477;408:476;406:476;406:475;405:475;405:474;404:474;403:474;403:472;401:472;400:472;400:471;399:471;399:470;397:470;397:468;396:468;396:467;395:466;394:466;394:465;392:465;392:464;391:464;390:464;388:464;387:464;387:463;386:463;385:463;384:463;384:462;383:462;382:461;381:461;379:461;378:461;377:461;376:461;376:459;375:459;374:459;373:459;372:459;370:459;369:459;369:460;369:461;368:461;368:462;366:462;366:464;365:464;364:464;364:465;363:465;361:465;360:465;360:466;359:466;357:466;357:468;356:468;355:468;355:469;354:469;352:469;351:469;351:470;350:470;350:471;348:471;'},//x: 433, y: 499,
    {id: 1, type: 'point', x: 343, y: 470, coords: '352:472;351:472;351:473;349:473;349:474;349:476;348:476;348:476;348:476;347:476;347:477;345:478;344:478;344:480;344:480;343:480;343:480;341:481;340:481;340:482;339:482;339:484;337:484;336:484;336:484;336:484;335:484;333:484;332:484;332:485;332:485;331:485;329:485;328:485;328:485;327:485;325:485;324:485;324:485;323:485;321:485;321:486;320:486;320:486;319:486;319:488;319:488;317:488;316:488;316:489;316:489;315:489;315:490;315:492;313:492;312:492;312:492;312:493;311:493;311:494;309:494;308:494;308:496;308:496;307:496;305:497;304:497;304:498;303:498;303:500;301:500;300:500;300:500;300:500;299:500;299:501;297:501;296:501;296:502;296:502;296:504;295:504;293:504;292:504;292:504;291:505;289:505;288:506;288:506;288:508;287:508;285:508;285:508;284:508;284:509;284:509;283:510;281:510;281:512;280:512;280:512;279:512;279:512;277:512;276:512;276:513;276:513;276:514;'},
    {id: 2, type: 'point', x: 269, y: 513, coords: '277:515;276:515;276:515;275:515;273:516;272:516;272:516;271:517;269:517;269:518;268:518;268:518;268:519;267:519;265:520;264:520;264:520;263:521;261:521;260:522;260:522;259:522;257:522;257:523;256:523;256:523;255:523;253:523;252:523;252:523;251:523;249:523;248:523;248:523;247:523;245:523;244:524;244:524;243:524;241:524;240:524;240:524;240:525;239:525;237:525;236:526;236:526;236:527;235:527;233:527;232:527;232:527;232:528;231:528;229:528;228:528;228:529;228:529;227:529;225:529;224:529;224:530;224:530;223:530;223:531;221:531;220:531;220:531;220:532;219:532;217:532;216:532;216:533;216:533;215:533;213:533;212:533;212:533;211:533;209:533;208:533;208:533;207:533;205:533;204:533;204:533;203:533;201:533;200:533;200:533;199:533;197:533;196:533;196:533;'},
    {id: 3, type: 'point', x: 182, y: 532, coords: '190:534;189:534;188:534;188:534;186:534;185:534;184:534;184:534;182:534;181:534;180:534;180:534;178:533;177:533;176:533;176:533;174:533;173:532;172:532;172:531;172:531;170:531;169:531;168:531;168:530;166:530;165:530;165:529;164:529;164:529;162:529;161:529;160:529;160:529;158:529;157:529;157:528;156:528;156:528;154:527;153:527;153:526;152:526;152:526;150:525;149:525;148:524;148:524;148:523;146:523;145:523;144:522;144:522;144:521;142:521;141:521;141:520;140:520;140:520;138:520;137:520;137:519;136:519;136:518;136:518;134:518;133:518;133:517;132:517;132:517;132:516;130:516;129:516;128:516;128:515;128:515;126:515;125:515;125:514;124:514;124:514;122:514;122:513;121:513;120:512;120:512;118:512;118:511;117:511;116:510;116:510;114:510;113:510;113:509;112:509;112:508;112:508;110:508;109:508;108:508;'},
    {id: 4, type: 'point', x: 103, y: 504, coords: '110:506;109:506;108:506;107:506;106:506;105:506;104:506;103:506;103:504;102:504;101:504;101:504;101:503;100:503;99:503;98:503;98:502;98:500;97:500;97:500;96:500;96:499;95:499;95:498;95:496;94:496;93:496;93:496;92:496;92:495;91:495;91:494;90:492;89:492;89:492;88:491;88:490;88:488;87:488;87:488;86:488;86:487;86:486;85:486;85:484;84:484;84:484;83:484;83:483;83:482;82:482;82:480;82:480;81:479;81:478;81:476;81:476;81:475;81:474;81:472;81:472;81:471;81:470;81:468;81:468;81:467;83:467;83:466;84:464;84:464;84:464;84:463;84:462;85:462;85:460;87:460;87:460;88:460;88:459;88:459;88:458;89:458;91:458;92:458;92:458;92:456;93:456;93:456;95:456;96:456;96:455;97:455;97:454;99:454;99:452;100:452;100:452;100:452;101:452;103:452;104:452;104:451;104:451;104:450;105:450;107:448;108:448;108:448;108:448;109:448;111:448;112:448;112:447;112:447;113:447;115:447;115:446;116:446;116:446;117:446;117:444;119:444;120:444;120:444;120:444;121:444;121:443;123:443;'},
    {id: 5, type: 'station', x: 111, y: 436, coords: '124:443;125:443;126:443;126:442;127:442;128:442;128:440;129:440;129:440;129:439;129:438;128:438;128:438;127:438;125:436;124:436;124:435;124:434;123:434;121:434;121:432;121:432;121:431;121:430;121:428;120:428;120:428;120:428;120:427;119:427;119:426;117:426;117:424;116:424;116:424;116:424;115:424;115:423;115:422;113:422;112:422;112:420;112:420;112:420;112:419;112:418;112:416;111:416;111:416;111:415;111:414;111:412;111:412;111:411;111:410;112:410;112:408;112:408;113:408;113:407;114:407;114:406;115:406;115:404;116:404;116:404;117:404;117:403;118:403;118:402;118:400;119:400;119:400;120:400;121:400;121:399;121:398;122:398;123:398;124:398;124:396;124:396;125:396;126:396;126:395;127:395;127:394;128:394;129:392;130:392;131:392;131:392;132:392;133:392;133:391;134:391;135:391;136:391;136:390;137:388;138:388;138:388;139:388;139:387;140:387;141:387;142:387;143:386;143:384;'},
    {id: 6, type: 'point', x: 135, y: 384, coords: '141:386;142:386;143:386;143:385;144:385;145:385;145:384;146:384;147:384;147:383;147:382;148:382;149:382;150:382;150:381;150:380;151:380;152:380;153:379;154:379;155:379;155:378;155:377;156:376;157:376;157:375;158:375;158:374;159:374;160:374;161:374;161:373;161:372;162:372;163:372;164:372;165:372;165:371;165:370;166:370;167:370;168:370;169:370;170:369;171:369;172:368;172:367;173:367;174:367;175:367;176:367;176:366;176:365;177:365;178:365;179:365;179:364;180:364;180:363;181:363;182:363;182:362;183:362;184:362;185:362;186:361;187:361;187:360;188:360;189:360;190:360;190:359;191:359;192:359;192:358;193:358;194:358;194:357;195:357;196:357;197:357;197:356;198:356;199:356;199:355;200:355;201:355;202:355;202:354;203:354;204:354;205:354;205:353;205:352;206:352;207:352;208:352;209:352;209:351;210:351;211:351;'},
    {id: 7, type: 'point', x: 207, y: 347, coords: '213:349;214:349;215:349;216:349;217:349;218:349;219:349;220:349;220:348;221:348;222:348;222:347;223:347;224:347;224:346;224:345;225:345;226:344;226:343;226:342;226:341;227:341;227:340;227:339;227:338;228:338;228:337;228:336;229:336;229:335;229:334;229:333;230:333;231:333;231:332;232:332;233:332;233:331;233:330;234:330;235:330;235:329;235:328;235:327;235:326;236:326;236:325;236:324;236:323;236:322;236:321;236:320;236:319;235:319;235:318;235:317;233:317;233:316;232:316;232:316;232:315;231:315;231:314;229:313;228:312;228:311;228:311;228:310;227:310;227:309;225:309;224:309;224:308;224:307;224:307;223:307;223:306;221:306;221:305;221:304;220:304;220:303;220:302;219:302;217:302;217:301;216:301;216:301;216:300;215:300;213:300;212:300;212:300;212:299;211:299;209:299;209:298;208:298;208:298;207:298;207:297;205:296;204:296;204:296;203:296;203:295;201:295;200:295;200:294;199:294;197:293;196:293;196:293;195:293;195:292;195:291;193:290;192:290;192:290;192:289;191:288;189:288;189:287;189:286;189:285;188:285;188:285;187:285;187:284;185:284;184:284;184:284;184:283;183:283;181:283;181:282;180:282;180:282;180:281;179:281;177:281;176:281;176:280;176:280;'},
    {id: 8, type: 'point', x: 169, y: 276, coords: '173:277;172:277;172:277;171:277;169:277;168:277;168:277;168:276;167:276;165:275;164:275;164:275;164:274;163:274;161:274;160:274;160:273;160:273;159:273;159:272;157:272;157:271;156:270;156:270;155:270;155:269;153:269;152:268;152:268;152:267;151:267;149:267;149:266;149:265;148:265;148:265;148:264;148:263;147:263;145:263;145:262;144:262;144:261;144:261;143:261;141:261;141:260;141:259;140:259;140:258;139:258;137:258;137:257;136:257;136:257;136:256;135:256;135:255;133:255;133:254;132:254;132:254;132:253;132:252;131:252;129:252;129:251;129:250;128:250;128:250;128:249;128:248;127:248;127:247;127:246;127:245;127:244;125:244;125:243;124:243;124:242;124:241;124:240;124:239;124:238;124:237;124:236;124:235;125:234;126:234;127:234;127:233;127:232;128:232;128:231;128:230;129:230;130:230;130:229;131:229;131:228;132:228;133:228;133:227;134:227;134:226;135:226;135:225;136:225;'},
    {id: 9, type: 'point', x: 131, y: 223, coords: '138:228;139:228;140:228;140:227;140:226;141:225;142:225;143:225;143:224;143:223;144:223;145:222;145:221;146:221;146:220;147:220;148:220;148:219;149:219;149:218;150:218;151:218;151:217;152:217;153:217;154:217;154:216;154:215;155:215;155:214;156:214;157:214;157:213;158:212;158:211;158:210;158:209;158:208;159:208;159:207;159:206;159:205;159:204;157:204;157:203;156:203;156:203;156:202;155:202;153:202;153:201;153:200;153:199;153:198;152:198;152:197;152:196;152:195;152:194;152:193;152:192;152:191;152:190;152:189;152:188;152:187;152:186;153:185;154:185;154:184;154:183;155:183;155:182;155:181;155:180;156:180;156:179;157:179;157:178;157:177;158:177;158:176;158:175;159:175;160:175;160:174;161:174;161:173;162:173;163:173;163:172;164:172;165:172;166:172;167:172;167:171;168:171;168:170;169:170;170:170;171:170;172:170;173:170;173:169;174:169;175:169;176:169;177:169;178:169;179:169;180:169;181:170;182:170;183:172;184:172;184:172;185:172;185:173;186:173;186:174;187:174;187:176;188:176;188:176;189:176;189:177;189:178;189:180;190:180;190:180;191:180;191:181;191:182;191:184;192:184;192:184;192:185;193:185;193:186;194:186;194:188;195:188;195:188;196:188;196:189;196:190;196:192;197:192;197:192;198:192;199:193;'},
    {id: 10, type: 'station', x:189, y: 189, coords: ''},
    {id: 11, type: 'point', x:246, y: 239, coords: ''},
    {id: 12, type: 'point', x:289, y: 201, coords: ''},
    {id: 13, type: 'point', x:324, y: 152, coords: ''},
    {id: 14, type: 'point', x:365, y: 106, coords: ''},
    {id: 15, type: 'point', x:408, y: 32, coords: ''},
    {id: 16, type: 'point', x:497, y: 74, coords: ''},
    {id: 17, type: 'point', x:453, y: 147, coords: ''},
    {id: 18, type: 'point', x:478, y: 220, coords: ''},
    {id: 19, type: 'station', x:444, y: 293, coords: ''},
    {id: 20, type: 'point', x:378, y: 343, coords: ''},
    {id: 21, type: 'point', x:368, y: 406, coords: ''},
    {id: 22, type: 'point', x:446, y: 423, coords: ''},
    {id: 23, type: 'point', x:518, y: 463, coords: ''},
    {id: 24, type: 'station', x:610, y: 491, coords: ''},
    {id: 25, type: 'point', x:708, y: 518, coords: ''},
    {id: 26, type: 'point', x:802, y: 466, coords: ''},
    {id: 27, type: 'point', x:877, y: 418, coords: ''},
    {id: 28, type: 'point', x:940, y: 379, coords: ''},
    {id: 29, type: 'station', x:948, y: 306, coords: ''},
    {id: 30, type: 'point', x:895, y: 283, coords: ''},
    {id: 31, type: 'point', x:834, y: 321, coords: ''},
    {id: 32, type: 'point', x:776, y: 357, coords: ''},
    {id: 33, type: 'point', x:713, y: 347, coords: ''},
    {id: 34, type: 'point', x:718, y: 293, coords: ''},
    {id: 35, type: 'station', x:784, y: 249, coords: ''},
    {id: 36, type: 'point', x:799, y: 184, coords: ''},
    {id: 37, type: 'point', x:744, y: 174, coords: ''},
    {id: 38, type: 'point', x:671, y: 211, coords: ''},
    {id: 39, type: 'point', x:617, y: 252, coords: ''},
    {id: 40, type: 'point', x:573, y: 300, coords: ''},
    {id: 41, type: 'station', x:510, y: 279, coords: ''},
    {id: 42, type: 'point', x:499, y: 226, coords: ''},
    {id: 43, type: 'point', x:537, y: 171, coords: ''},
    {id: 44, type: 'point', x:583, y: 137, coords: ''},
    {id: 45, type: 'point', x:607, y: 79, coords: ''},
    {id: 46, type: 'point', x:639, y: 27, coords: ''},
    {id: 47, type: 'station', x:686, y: 50, coords: ''},
    {id: 48, type: 'point', x:665, y: 134, coords: ''},
    {id: 49, type: 'point', x:744, y: 79, coords: ''},
    {id: 50, type: 'point', x:812, y: 133, coords: ''},
    {id: 51, type: 'point', x:858, y: 102, coords: ''},
    {id: 52, type: 'finish', x:871, y: 160, coords: ''},
]

